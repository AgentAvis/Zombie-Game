<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_player</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>walk_spd = 1;
phys = false //check this to true if you are using physics
moving = false
globalvar occupied;
occupied = false;

flat = 2 //used for getting shushed

blood_color = c_red

xsquish = 1
ysquish = 1

dead = false

grounded = false

hsp = 0 //does the same as hspeed
vsp = 0 //does the same as vspeed
wasonladder = false 
if phys { 
    phy_fixed_rotation = true;
}
//instance_create(x,y,o_camera);
instance_create(x,y,o_gun);

hp = 100;
maxHp = 100;


hop = 0
hopspeed = 0

oldgrounded = false

money = 0;
mass = 1

xx = 0;
yy = 0;
ss = 1;
//test comment 11:39 pm 10-23-2017

inventory_open = false//is the inventory gui open

//Variables for the inventory
c1 = make_color_rgb(130,130,130);
c2 = make_color_rgb(64,64,64);
c3 = make_color_rgb(142,142,142);
c4 = make_color_rgb(117,117,117);
c5 = make_color_rgb(150,150,150);
width = 362;
height = 64;

//inventory draw animation stuffs
uioffset = 0//how much is the ui being offset at, used to make it sliiide

//ExpansionSlotButtons
for(i = 0; i &lt; o_gun.image_number; i++){
for(b = 0; b &lt; 2; b++){
eB[i,b] = false;
SA[i,b] = 0;
}
}
expansion_width = sprite_get_width(s_expansion_UI)/2;
expansion_height = sprite_get_height(s_expansion_UI)/2;

//Inventory Alpha
alph = 0;
alph_target = 0;

//Healthkits
healthkits = 1;


//Agument price
augmentprice = 0;


//GUI SCALE
GUISCALE = window_get_width()/1600;

oldhp = hp
waittime = 0


global.focus = o_player;
with(oCamera){
mode = 1;
}

//Turns back on zooming that I turned off for menus
oCamera.room_Actual = false;



//Audio
audio_listener_orientation(0,1,0,0,0,1);
audio_falloff_set_model(audio_falloff_exponent_distance);


if(global.loading){
scr_autoload();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.pause { exit;}

flat = lerp(flat,1,.03)

if hp &lt;= 0 {
    if !dead { 
    vsp = -1 
    p = instance_create(x,(window_get_height()/2) + sprite_get_height(player_death_buttons) + 10, o_player_buttons);
    p.spr = 1;
    p = instance_create(x,(window_get_height()/2) - sprite_get_height(player_death_buttons) - 10, o_player_buttons);
    p.spr = 0;
    }
    dead = true
    if random (3) &lt; 1 {
        with (instance_create(x,y,o_blood_drop)) { motion_set_custom(random(2),random(360)) }
    }
    sprite_index = s_player_dead
    apply_speeds_and_gravity();
    if grounded { hsp *= .75 }
    hop = 0
    

    exit;
}


if(!occupied){
    scr_movement();
    jump_speed = 2
    if grounded {
        if (jump_key) { vsp -= jump_speed y -= clamp(jump_speed,3,50)}
    }
}

//display_set_gui_size(view_wport[0], view_hport[0]);
//how much to hop offset

hop += hopspeed
if hop &lt; 0 { hopspeed += .05 } else {
    if moving and !occupied{
        hopspeed = -.5 hop = 0
    } else {
    hop = 0
    }
}


if mouse_x &gt; x { image_xscale = 1 } else { image_xscale = -1 }

up = false
ladder = false


if place_meeting(x,y,oLadder) {
    ladder = true
    
    if (keyboard_check_pressed(ord("W")) or keyboard_check_pressed(ord("S"))) {//or ((keyboard_check(ord("W"))) or (keyboard_check(ord("S"))) and (!oldladder)) {
        //x = instance_nearest(x,y,oLadder).x + 4
    }

    
    if keyboard_check(ord("W")) {
        up = true
        y -= (2.5)/2
        wasonladder = true
        vsp = 0
        //hsp = 0
    }
    if keyboard_check(ord("S")) {  
        up = true
        y += (2.5)/2
        wasonladder = true
        vsp = 0
        //hsp = 0
    }
}
if !occupied {
    if !up {
        apply_speeds_and_gravity();
    } else {
        x += hsp
    }
} else { wasonladder = false }


//Health Upgrades
hp = clamp(hp,-100,100);
if(keyboard_check_pressed(ord('M')) and healthkits &gt; 0){
    hp += 20;
    healthkits--;
}

if hp &lt; oldhp and waittime &lt;= 0 {
    
    soundid = irandom(1)
    //if soundid = 0 { sound = sOop3 }
    //if soundid = 1 { sound = sOop4 } 
    //audio_play_sound(sound, 1, false);
    waittime = 20
    oldhp = hp
} else {
    waittime --
}


//collisions with ground
//if y &gt; ground_level { y = ground_level vsp = 0 }

//x += hsp * global.timescale //allows slomo
//y += vsp * global.timescale 
oldladder = ladder


audio_listener_position(x, y, (oCamera.ZM) * 100);

if(keyboard_check_pressed(ord('U'))){
scr_autosave();
}




</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_set_font(-1) //set the font

scr_make_gui();
window_x = window_mouse_get_x();
window_y = window_mouse_get_y();
var temp = 99;
if keyboard_check_pressed(vk_tab) {
    inventory_open = !inventory_open
}


if((inventory_open) or (o_shop_gui.visible)){
    doffset = 0
    alph_target = .9;
} else {
    doffset = -600 * GUISCALE_Y
    //uioffset = -400
    alph_target = 0;
}
uioffset = lerp(uioffset,doffset,.4);
alph = lerp(alph,alph_target,0.03);



draw_set_alpha(alph);
draw_set_color(c3);
draw_rectangle(20 * GUISCALE_X,(104 + uioffset) * GUISCALE_Y,122 * GUISCALE_X,(208 + uioffset) * GUISCALE_Y,false);
draw_sprite_ext(s_medkit,0,(44 + 12) * GUISCALE_X,(168 + uioffset) * GUISCALE_Y,2.96 * GUISCALE_X,2.96 * GUISCALE_Y,0,c_white,1);
draw_set_color(c_black);
draw_text(84 * GUISCALE_X,(162 + uioffset) * GUISCALE_Y,"x" + string(healthkits));


if(o_gun.hasGun[1,0]){
scr_draw_gun_inv(134+uioffset,temp,1,1);
}
if(o_gun.hasGun[1,1]){
scr_draw_gun_inv(134+uioffset,temp,1,5);
}
if(o_gun.hasGun[0,0]){
temp += height;
scr_draw_gun_inv(134+uioffset,temp,0,0);
}
if(o_gun.hasGun[2,0]){
temp += height;
scr_draw_gun_inv(134+uioffset,temp,2,2);
}
if(o_gun.hasGun[3,0]){
temp += height;
scr_draw_gun_inv(134+uioffset,temp,3,3);
}
if(o_gun.hasGun[4,0]){
temp += height;
scr_draw_gun_inv(134+uioffset,temp,4,4);
}
draw_set_alpha(1);





draw_healthbar(124 * GUISCALE_X,29 * GUISCALE_Y,470 * GUISCALE_X , 51 * GUISCALE_Y , (hp/maxHp) * 100, c_black, c_red, c_green, 0, true, false);

draw_set_color(c_black);

draw_sprite_ext(s_ui_base,0,0,0,1 * GUISCALE_X, 1 * GUISCALE_Y,0,c_white,1);
draw_sprite_ext(s_dollar_bill,0,147 * GUISCALE_X,63 * GUISCALE_Y,1.18 * GUISCALE_X,1.18 * GUISCALE_Y,0,c_white,1);

draw_set_color(c_black);
draw_text(191 * GUISCALE_X,65 * GUISCALE_Y,"$" + string(money));
draw_set_color(c_white);
//draw_text(0,0,"(" + string(xx) + "," + string(yy) + ")" + string(ss));
draw_sprite_ext(s_guns,o_gun.spr,321 * GUISCALE_X,71 * GUISCALE_Y,4.04 * GUISCALE_X,4.04 * GUISCALE_Y,1,c_white,1);


draw_set_color(c_yellow)
draw_text((321+88) * GUISCALE_X,(71-10) * GUISCALE_Y,"|||");

draw_set_color(c_white)
draw_text((321+88+string_width("|||")) * GUISCALE_X,(71-10) * GUISCALE_Y,": " + string(o_gun.ammo[o_gun.type]));


scr_make_gui();


draw_set_color(c_black)
draw_circle(70 * GUISCALE_X,70 * GUISCALE_Y,64 * GUISCALE_X,false);
draw_sprite_ext(s_player,image_index,71 * GUISCALE_X,(68+((18*6.5)/2)) * GUISCALE_Y,6.5 * GUISCALE_X,6.5 * GUISCALE_Y,0,c_white,1);
draw_set_color(c_white)

draw_text(0,0,"(" + string(xx) + "," + string(yy) + ")" + string(eB[0,0]));




</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_sprite_ext(sprite_index,image_index,x,y+hop,image_xscale,image_yscale*flat*clamp(ysquish,.9,1),image_angle,image_blend,image_alpha);
//draw_text(x,y - 32,"$: " + string(money));
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>1</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
